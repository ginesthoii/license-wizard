<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Full License Wizard</title>
<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    display: flex;
    height: 100vh;
    overflow: hidden;
  }

  /* SIDEBAR */
  .sidebar {
    width: 240px;
    background: #1f1f1f;
    color: #eee;
    padding: 20px;
    box-sizing: border-box;
  }
  .side-title {
    font-size: 20px;
    margin-bottom: 25px;
    font-weight: 600;
  }
  .side-link {
    display: block;
    padding: 10px 5px;
    cursor: pointer;
    color: #ccc;
    border-radius: 4px;
    margin-bottom: 5px;
    text-decoration: none;
  }
  .side-link:hover {
    background: #333;
    color: white;
  }
  .active {
    background: #444;
    color: #fff !important;
  }

  /* CONTENT AREA */
  .content {
    flex: 1;
    overflow-y: auto;
    padding: 30px;
  }

  fieldset {
    border: 1px solid #aaa;
    padding: 15px;
    margin-top: 20px;
    border-radius: 6px;
  }
  legend {
    padding: 0 8px;
    font-weight: 600;
  }

  button {
    padding: 10px 15px;
    margin-top: 15px;
    cursor: pointer;
    font-size: 15px;
  }

  textarea {
    width: 100%;
    height: 350px;
    font-family: monospace;
    margin-top: 15px;
  }

  /* Steps */
  .step {
    display: none;
  }
  .visible {
    display: block;
  }

</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="side-title">License Wizard</div>
  <div class="side-link" data-target="step1">1. Decision Tree</div>
  <div class="side-link" data-target="step2">2. Generator</div>
  <div class="side-link" data-target="step3">3. Explain Like I'm 5</div>
  <div class="side-link" data-target="step4">4. Export License File</div>
</div>

<!-- MAIN CONTENT -->
<div class="content">

<!-- STEP 1: DECISION TREE -->
<div id="step1" class="step visible">
  <h1>Step 1: Interactive Decision Tree</h1>
  <p>Pick what you want. The system will recommend your ideal license automatically.</p>

  <fieldset>
    <legend>Commercial Use</legend>
    <label><input type="radio" name="commercial" value="yes"> Yes</label><br>
    <label><input type="radio" name="commercial" value="yes-unmodified"> Yes, but only if unmodified</label><br>
    <label><input type="radio" name="commercial" value="yes-no-selling"> Yes, but cannot sell code itself</label><br>
    <label><input type="radio" name="commercial" value="no"> No</label>
  </fieldset>

  <fieldset>
    <legend>Closed Source Allowed?</legend>
    <label><input type="radio" name="closed" value="yes"> Yes</label><br>
    <label><input type="radio" name="closed" value="no"> No</label>
  </fieldset>

  <fieldset>
    <legend>Derivative Freedom</legend>
    <label><input type="radio" name="copyleft" value="strong"> Strong Copyleft</label><br>
    <label><input type="radio" name="copyleft" value="weak"> Weak Copyleft</label><br>
    <label><input type="radio" name="copyleft" value="no"> No</label><br>
  </fieldset>

  <fieldset>
    <legend>Public Editing?</legend>
    <label><input type="radio" name="public" value="yes"> Yes</label><br>
    <label><input type="radio" name="public" value="view-only"> View Only</label><br>
    <label><input type="radio" name="public" value="no"> No</label>
  </fieldset>

  <fieldset>
    <legend>Web/SaaS Disclosure?</legend>
    <label><input type="radio" name="saas" value="yes"> Yes (AGPL behavior)</label><br>
    <label><input type="radio" name="saas" value="no"> No</label>
  </fieldset>

  <fieldset>
    <legend>Strict Clauses</legend>
    <label><input type="checkbox" id="antiAI"> Anti-AI</label><br>
    <label><input type="checkbox" id="noGov"> No Government Use</label><br>
    <label><input type="checkbox" id="noBigTech"> No Big-Tech Use</label><br>
    <label><input type="checkbox" id="noSaaS"> No SaaS Resale</label><br>
    <label><input type="checkbox" id="moral"> Moral Use</label><br>
    <label><input type="checkbox" id="sourceVisible"> Source Visible Only</label><br>
    <label><input type="checkbox" id="personalOnly"> Personal Use Only</label><br>
    <label><input type="checkbox" id="noDerivatives"> No Derivatives</label><br>
    <label><input type="checkbox" id="attribBanner"> Attribution Banner</label><br>
  </fieldset>

  <div class="result-box">
    <h2>Recommended License</h2>
    <div id="license-result">Waiting for input...</div>

    <h2>Why</h2>
    <div id="license-explanation"></div>

    <h2>Strict Clauses</h2>
    <div id="strict-list">None selected.</div>
  </div>
</div>

<!-- STEP 2: GENERATOR -->
<div id="step2" class="step">
  <h1>Step 2: License Generator</h1>
  <p>This generates the full license text with your name, year, and strict clauses.</p>

  <fieldset>
    <legend>Your Info</legend>
    <label>Your Name<br><input id="author" type="text" placeholder="Olivia Griffin"></label><br><br>
    <label>Year<br><input id="year" type="text" placeholder="2025"></label><br>
  </fieldset>

  <button onclick="generateFinalLicense()">Generate Full License Text</button>
  <button onclick="copyFinal()">Copy to Clipboard</button>

  <textarea id="final-output" placeholder="Generated license appears here..."></textarea>
</div>

<!-- STEP 3: ELI5 MODE -->
<div id="step3" class="step">
  <h1>Step 3: Explain Like I'm 5</h1>
  <p>This explains your chosen license in extremely simple language.</p>

  <button onclick="explainELI5()">Explain My License</button>

  <textarea id="eli5-output" placeholder="Explanation appears here..."></textarea>
</div>

<!-- STEP 4: EXPORT -->
<div id="step4" class="step">
  <h1>Step 4: Export LICENSE File</h1>

  <button onclick="exportLicense()">Download LICENSE File</button>

  <p>The downloaded file will contain whatever is currently shown in the Generator output.</p>
</div>

</div>

<script>
/* UTILITY */
function id(x){ return document.getElementById(x); }
function get(name){
  const el = document.querySelector(`input[name="${name}"]:checked`);
  return el ? el.value : null;
}

/* SIDEBAR NAVIGATION */
const links = document.querySelectorAll('.side-link');
links.forEach(link=>{
  link.addEventListener('click', ()=>{
    links.forEach(l=>l.classList.remove('active'));
    link.classList.add('active');

    document.querySelectorAll('.step').forEach(s=>s.classList.remove('visible'));
    id(link.dataset.target).classList.add('visible');
  });
});

/* STRICT CLAUSES COLLECTION */
function getStrictClauses(){
  const arr=[];
  if(id('antiAI').checked) arr.push('Anti-AI');
  if(id('noGov').checked) arr.push('No Government Use');
  if(id('noBigTech').checked) arr.push('No Big-Tech Use');
  if(id('noSaaS').checked) arr.push('No SaaS Resale');
  if(id('moral').checked) arr.push('Moral Use');
  if(id('sourceVisible').checked) arr.push('Source Visible Only');
  if(id('personalOnly').checked) arr.push('Personal Use Only');
  if(id('noDerivatives').checked) arr.push('No Derivatives');
  if(id('attribBanner').checked) arr.push('Attribution Banner');
  return arr;
}

/* DECISION TREE LOGIC */
document.body.addEventListener("change", updateDecision);

let chosenLicense = null;

function updateDecision(){
  const commercial=get('commercial');
  const closed=get('closed');
  const copyleft=get('copyleft');
  const pub=get('public');
  const saas=get('saas');

  const strict = getStrictClauses();

  // proprietary
  if(pub==='no' || pub==='view-only'){
    chosenLicense='Strict Proprietary License';
    id('license-result').innerText='Strict Proprietary License';
    id('license-explanation').innerText='No editing/forking allowed → proprietary.';
    id('strict-list').innerText=strict.join(', ')||'None';
    return;
  }

  // strong copyleft
  if(commercial==='no' || closed==='no' || copyleft==='strong'){
    if(saas==='yes'){
      chosenLicense='AGPLv3';
      id('license-result').innerText='AGPLv3';
      id('license-explanation').innerText='Strong copyleft + SaaS/web disclosure.';
    } else {
      chosenLicense='GPLv3';
      id('license-result').innerText='GPLv3';
      id('license-explanation').innerText='Strong copyleft: modified versions must stay free.';
    }
    id('strict-list').innerText=strict.join(', ')||'None';
    return;
  }

  // weak copyleft
  if(copyleft==='weak'){
    chosenLicense='MPL 2.0';
    id('license-result').innerText='Mozilla MPL 2.0';
    id('license-explanation').innerText='Only modified files must remain open.';
    id('strict-list').innerText=strict.join(', ')||'None';
    return;
  }

  // permissive
  if(commercial==='yes' && closed==='yes' && copyleft==='no'){
    chosenLicense='MIT';
    id('license-result').innerText='MIT License';
    id('license-explanation').innerText='Permissive: commercial use, closed source allowed.';
    id('strict-list').innerText=strict.join(', ')||'None';
    return;
  }

  // default
  chosenLicense='MIT';
  id('license-result').innerText='MIT License';
  id('license-explanation').innerText='Default permissive license.';
  id('strict-list').innerText=strict.join(', ')||'None';
}

/* FINAL LICENSE GENERATION */
function generateFinalLicense(){
  const author=id("author").value||"Author";
  const year=id("year").value||new Date().getFullYear();
  const strict=getStrictClauses();

  let text=`License: ${chosenLicense}\n\nCopyright © ${year} ${author}\n`;

  text+=`\nBase License:\n${chosenLicense}\n`;

  if(strict.length){
    text+=`\nAdditional Clauses:\n- ${strict.join("\n- ")}`;
  }

  id("final-output").value=text;
}

/* COPY */
function copyFinal(){
  navigator.clipboard.writeText(id("final-output").value);
  alert("Copied.");
}

/* ELI5 MODE */
function explainELI5(){
  const L=chosenLicense;
  let msg="";

  if(L==='GPLv3') msg="GPL means: You can use it, but if you change it, you must share it back.";
  if(L==='AGPLv3') msg="AGPL means: Same as GPL, but also if it runs on a website, the source must be shared.";
  if(L==='MIT') msg="MIT means: You can do almost anything, just keep the copyright line.";
  if(L==='MPL 2.0') msg="MPL means: You can mix code, but must share changes to original files.";
  if(L==='Strict Proprietary License') msg="Proprietary means: You can read it, but you can't use, copy, or change it.";

  msg+="\n\nStrict Clauses:\n"+(getStrictClauses().join(", ")||"None");

  id("eli5-output").value=msg;
}

/* EXPORT LICENSE FILE */
function exportLicense(){
  const blob=new Blob([id("final-output").value],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="LICENSE";
  a.click();
}
</script>

</body>
</html>
