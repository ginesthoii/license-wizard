<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Advanced License Generator Wizard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>

/* =========================================================
   BASE / RESET
   ========================================================= */
*, *::before, *::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, sans-serif;
  background: #f6f6f6;
  color: #222;
}

/* Dark mode override */
body.dark {
  background: #111;
  color: #eee;
}

/* =========================================================
   LAYOUT
   ========================================================= */
#wrapper {
  display: flex;
  min-height: 100vh;
}

/* Sidebar */
#sidebar {
  width: 260px;
  background: #333;
  color: #eee;
  padding: 20px 0;
  flex-shrink: 0;
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
}
body.dark #sidebar { background:#000; }
/* Sidebar Title */
#sidebar h2 {
  padding: 0 20px;
  margin-top: 0;
  font-size: 20px;
  color: #fff;
}

/* Sidebar Nav */
#sidebar ul { list-style: none; padding: 0; }
#sidebar li {
  padding: 12px 20px;
  cursor: pointer;
  transition: background 0.2s;
  border-left: 4px solid transparent;
}
#sidebar li:hover { background: #444; }
#sidebar li.active {
  background: #555;
  border-left-color: #888;
  font-weight: bold;
}

/* Content */
#content {
  flex-grow: 1;
  padding: 40px;
  max-width: 900px;
}

/* Page visibility */
.page { display: none; }
.page.active { display: block; }

/* =========================================================
   QUESTION / UI ELEMENTS
   ========================================================= */
.question {
  margin-bottom: 30px;
  padding: 20px;
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 6px;
}
body.dark .question { background:#222; border-color:#444; }

.question h3 { margin: 0 0 10px; font-size:18px; }
.question p.summary { margin:0 0 10px; color:#444; }

/* Inline explanation accordion */
details.more-info {
  margin: 8px 0 12px;
  padding: 6px 10px;
  background: #f1f1f1;
  border-left: 3px solid #333;
  border-radius: 4px;
}
body.dark details.more-info { background:#333; border-left-color:#666; }

details.more-info summary {
  cursor: pointer;
  font-weight: bold;
}
details.more-info p {
  margin: 8px 0;
}

/* Options */
label.option {
  display: block;
  margin-bottom: 8px;
  cursor: pointer;
}
input[type="radio"], input[type="checkbox"] { margin-right:10px; }

/* =========================================================
   BUTTONS
   ========================================================= */
.button-row {
  margin-top: 40px;
  display: flex;
  justify-content: space-between;
}

button {
  padding: 12px 22px;
  font-size: 15px;
  border: none;
  background: #333;
  color: #fff;
  border-radius: 6px;
  cursor: pointer;
}
body.dark button { background:#111; }

button:hover { background:#111; }
button[disabled] { opacity: .5; cursor:not-allowed; }

/* =========================================================
   EXPORT AREA
   ========================================================= */
textarea.export-box {
  width: 100%;
  height: 280px;
  padding: 12px;
  font-family: monospace;
  border: 1px solid #bbb;
  border-radius: 6px;
  resize: vertical;
}
body.dark textarea.export-box { background:#222; color:#fff; }

/* =========================================================
   DARK MODE SWITCH
   ========================================================= */
#darkToggle {
  position: absolute;
  bottom:20px;
  left:20px;
  padding:8px 14px;
  background:#444;
  color:#fff;
  border-radius:5px;
  cursor:pointer;
}
body.dark #darkToggle { background:#888; color:#000; }

/* =========================================================
   MOBILE
   ========================================================= */
@media (max-width:820px) {
  #wrapper { flex-direction: column; }
  #sidebar {
    width:100%;
    height:auto;
    position:relative;
  }
  #content { padding:20px; }
}
</style>
</head>
<body>

<div id="wrapper">

<!-- =========================================================
     SIDEBAR
     ========================================================= -->
<div id="sidebar">
  <h2>License Wizard</h2>
  <ul>
    <li class="nav-item active" data-page="page1">Decision Tree</li>
    <li class="nav-item" data-page="page2">Explanations</li>
    <li class="nav-item" data-page="page3">Generator</li>
    <li class="nav-item" data-page="page4">ELI5</li>
    <li class="nav-item" data-page="page5">Results</li>
    <li class="nav-item" data-page="page6">Export</li>
  </ul>
  <div id="darkToggle">Dark Mode</div>
</div>

<!-- =========================================================
     CONTENT AREA
     ========================================================= -->
<div id="content">

<!-- =========================================================
     PAGE 1 — DECISION TREE
     ========================================================= -->
<div class="page active" id="page1">
  <h1>Step 1 — Decision Tree</h1>

  <!-- Commercial -->
  <div class="question">
    <h3>Commercial Use</h3>
    <p class="summary">Can someone use this in anything that makes money?</p>
    <details class="more-info">
      <summary>Learn More</summary>
      <p>Commercial use includes selling products, SaaS, services, or bundling your work into any revenue-making activity.</p>
    </details>

    <label class="option"><input type="radio" name="commercial" value="yes"> Yes — fully allowed</label>
    <label class="option"><input type="radio" name="commercial" value="limited"> Yes — but no reselling the code itself</label>
    <label class="option"><input type="radio" name="commercial" value="no"> No — strictly non-commercial</label>
  </div>

  <!-- Closed Source Allowed? -->
  <div class="question">
    <h3>Closed Source Allowed?</h3>
    <p class="summary">Can people make a proprietary version?</p>
    <details class="more-info">
      <summary>Learn More</summary>
      <p>If “yes,” someone can take your work and never give their changes back.  
         If “no,” then all modifications must remain open-source.</p>
    </details>

    <label class="option"><input type="radio" name="closed" value="yes"> Yes — companies may keep changes private</label>
    <label class="option"><input type="radio" name="closed" value="no"> No — all derivatives must stay open</label>
  </div>

  <!-- Copyleft -->
  <div class="question">
    <h3>Derivative Freedom</h3>
    <p class="summary">How much freedom do modified versions get?</p>
    <details class="more-info">
      <summary>Learn More</summary>
      <p><strong>Strong Copyleft:</strong> ALL modifications stay free (GPL).<br>
         <strong>Weak Copyleft:</strong> Only changed files must stay free (LGPL/MPL).<br>
         <strong>None:</strong> You can do anything (MIT/Apache).</p>
    </details>

    <label class="option"><input type="radio" name="copyleft" value="strong"> Strong Copyleft</label>
    <label class="option"><input type="radio" name="copyleft" value="weak"> Weak Copyleft</label>
    <label class="option"><input type="radio" name="copyleft" value="none"> None</label>
  </div>

  <!-- Public Editing -->
  <div class="question">
    <h3>Public Editing / Forking?</h3>
    <p class="summary">Is forking/editing allowed?</p>

    <details class="more-info">
      <summary>Learn More</summary>
      <p>This controls whether anyone can remix, fork, and publish changes.</p>
    </details>

    <label class="option"><input type="radio" name="editing" value="yes"> Yes</label>
    <label class="option"><input type="radio" name="editing" value="view"> View Only</label>
    <label class="option"><input type="radio" name="editing" value="no"> No — totally locked</label>
  </div>

  <!-- SaaS Disclosure -->
  <div class="question">
    <h3>SaaS / Web Disclosure (AGPL)</h3>
    <p class="summary">Must web services disclose modified source?</p>

    <details class="more-info">
      <summary>Learn More</summary>
      <p>AGPL-style requirement forces companies running your work over the internet to publish their modifications.</p>
    </details>

    <label class="option"><input type="radio" name="saas" value="yes"> Yes — require AGPL-style</label>
    <label class="option"><input type="radio" name="saas" value="no"> No</label>
  </div>

  <!-- Strict Clauses -->
  <div class="question">
    <h3>Strict Clauses</h3>
    <p class="summary">Optional restrictive add-ons:</p>
    <label class="option"><input type="checkbox" name="strict" value="anti-ai"> Anti-AI Use</label>
    <label class="option"><input type="checkbox" name="strict" value="no-gov"> No Government Use</label>
    <label class="option"><input type="checkbox" name="strict" value="no-bigtech"> No Big-Tech Use</label>
    <label class="option"><input type="checkbox" name="strict" value="moral"> Moral Use Only</label>
    <label class="option"><input type="checkbox" name="strict" value="source-visible"> Source Visible Only</label>
    <label class="option"><input type="checkbox" name="strict" value="personal-only"> Personal Use Only</label>
    <label class="option"><input type="checkbox" name="strict" value="attrib-banner"> Attribution Banner Required</label>
  </div>

  <!-- Recommendation -->
  <div class="question">
    <h3>Recommended License</h3>
    <div id="licenseRecommendation">(Waiting for input…)</div>
    <div id="licenseWhy" style="margin-top:10px;color:#666;"></div>
  </div>

  <div class="button-row">
    <button id="next1">Next →</button>
  </div>
</div>

<!-- =========================================================
     PAGE 2 — EXPLANATIONS
     ========================================================= -->
<div class="page" id="page2">
  <h1>Detailed Concept Explanations</h1>
  <p>This explains all terms used in the wizard.</p>

  <h2>Commercial Use</h2>
  <p>Whether someone may use your code inside a for-profit environment.</p>

  <h2>Closed Source</h2>
  <p>If disabled, all forks must publish source code.</p>

  <h2>Strong vs. Weak Copyleft</h2>
  <p>Strong = every change must stay open. Weak = only modified pieces.</p>

  <h2>SaaS Disclosure</h2>
  <p>AGPL forces cloud hosts to publish their changes.</p>

  <h2>Strict Clauses</h2>
  <p>Extra rules layered on top of normal open-source rules.</p>

  <div class="button-row">
    <button id="back2">← Back</button>
    <button id="next2">Next →</button>
  </div>
</div>

<!-- =========================================================
     PAGE 3 — GENERATOR
     ========================================================= -->
<div class="page" id="page3">
  <h1>Generate Your License</h1>

  <div class="question">
    <h3>Your Name</h3>
    <input id="authorName" style="width:100%;padding:10px;font-size:15px;" placeholder="Your name">
  </div>

  <div class="question">
    <h3>Year</h3>
    <input id="licenseYear" style="width:100%;padding:10px;font-size:15px;" placeholder="2025">
  </div>

  <div class="question">
    <h3>Choose Base License</h3>
    <label class="option"><input type="radio" name="base" value="MIT"> MIT</label>
    <label class="option"><input type="radio" name="base" value="Apache"> Apache 2.0</label>
    <label class="option"><input type="radio" name="base" value="GPLv3"> GPLv3</label>
    <label class="option"><input type="radio" name="base" value="AGPLv3"> AGPLv3</label>
    <label class="option"><input type="radio" name="base" value="LGPLv3"> LGPLv3</label>
    <label class="option"><input type="radio" name="base" value="MPL"> MPL 2.0</label>
  </div>

  <div class="question">
    <h3>Add Strict Clauses</h3>
    <label class="option"><input type="checkbox" name="genStrict" value="anti-ai"> Anti-AI</label>
    <label class="option"><input type="checkbox" name="genStrict" value="no-gov"> No Government Use</label>
    <label class="option"><input type="checkbox" name="genStrict" value="no-bigtech"> No Big-Tech Use</label>
    <label class="option"><input type="checkbox" name="genStrict" value="moral"> Moral Use Only</label>
    <label class="option"><input type="checkbox" name="genStrict" value="source-visible"> Source Visible Only</label>
    <label class="option"><input type="checkbox" name="genStrict" value="personal-only"> Personal Use Only</label>
    <label class="option"><input type="checkbox" name="genStrict" value="attrib-banner"> Attribution Banner</label>
  </div>

  <div class="button-row">
    <button id="back3">← Back</button>
    <button id="next3">Next →</button>
  </div>
</div>

<!-- =========================================================
     PAGE 4 — ELI5
     ========================================================= -->
<div class="page" id="page4">
  <h1>Explain Like I'm 5</h1>

  <div class="question"><h3>MIT</h3><p>“Here’s my toy. Do anything.”</p></div>
  <div class="question"><h3>Apache</h3><p>“Do anything, but don’t blame me.”</p></div>
  <div class="question"><h3>GPLv3</h3><p>“If you change it, you must share it.”</p></div>
  <div class="question"><h3>AGPLv3</h3><p>“If you run it on a website, share it too.”</p></div>
  <div class="question"><h3>LGPL/MPL</h3><p>“Share only the parts you change.”</p></div>
  <div class="question"><h3>Strict Clauses</h3><p>“You may play, but follow my extra rules.”</p></div>

  <div class="button-row">
    <button id="back4">← Back</button>
    <button id="next4">Next →</button>
  </div>
</div>

<!-- =========================================================
     PAGE 5 — RESULTS
     ========================================================= -->
<div class="page" id="page5">
  <h1>Your Generated LICENSE</h1>

  <textarea id="resultBox" class="export-box"></textarea>

  <div class="button-row">
    <button id="back5">← Back</button>
    <button id="next5">Next →</button>
  </div>
</div>

<!-- =========================================================
     PAGE 6 — EXPORT
     ========================================================= -->
<div class="page" id="page6">
  <h1>Export Options</h1>

  <button onclick="copyToClipboard()">Copy to Clipboard</button>
  <button onclick="downloadLicense()">Download LICENSE</button>
  <button onclick="downloadPDF()">Export PDF</button>

  <h2 style="margin-top:40px;">README Badges</h2>
  <textarea id="badgeBox" class="export-box"></textarea>

  <div class="button-row">
    <button id="back6">← Back</button>
  </div>
</div>


</div> <!-- content -->

</div> <!-- wrapper -->


<!-- =========================================================
     SCRIPT — LOGIC
     ========================================================= -->
<script>
/* ========== NAVIGATION ========== */
const pages = document.querySelectorAll('.page');
document.querySelectorAll('.nav-item').forEach(item => {
  item.onclick = () => {
    document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    item.classList.add('active');

    pages.forEach(p => p.classList.remove('active'));
    document.getElementById(item.dataset.page).classList.add('active');
  };
});

/* BUTTON NAV */
document.getElementById('next1').onclick = () => showPage(2);
document.getElementById('back2') .onclick = () => showPage(1);
document.getElementById('next2') .onclick = () => showPage(3);
document.getElementById('back3') .onclick = () => showPage(2);
document.getElementById('next3') .onclick = () => generateLicense();
document.getElementById('back4') .onclick = () => showPage(3);
document.getElementById('next4') .onclick = () => showPage(5);
document.getElementById('back5') .onclick = () => showPage(4);
document.getElementById('next5') .onclick = () => showPage(6);
document.getElementById('back6') .onclick = () => showPage(5);

function showPage(n) {
  pages.forEach(p => p.classList.remove('active'));
  document.getElementById("page"+n).classList.add('active');
  // highlight in sidebar
  document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
  document.querySelector('.nav-item[data-page="page'+n+'"]').classList.add('active');
}

/* ========== LICENSE RECOMMENDER ========== */
const recBox = document.getElementById('licenseRecommendation');
const recWhy = document.getElementById('licenseWhy');
const inputs = document.querySelectorAll('#page1 input');

inputs.forEach(i => i.addEventListener('change', recommend));

function recommend() {
  const commercial = get('commercial');
  const closed = get('closed');
  const copy = get('copyleft');
  const editing = get('editing');
  const saas = get('saas');

  if (!commercial || !closed || !copy || !editing || !saas) {
    recBox.textContent = "(Waiting for selections...)";
    recWhy.textContent = "";
    return;
  }

  let rec = "";
  let why = "";

  if (copy === 'strong' && saas === "yes") {
    rec = "AGPLv3";
    why = "Strong copyleft + SaaS disclosure → AGPL.";
  }
  else if (copy === 'strong') {
    rec = "GPLv3";
    why = "Strong copyleft → GPLv3.";
  }
  else if (copy === 'weak') {
    rec = "MPL 2.0 (or LGPL)";
    why = "Weak copyleft → MPL or LGPL.";
  }
  else if (copy === 'none' && closed === "yes") {
    rec = "MIT or Apache 2.0";
    why = "Permissive + allows closed source.";
  }
  else {
    rec = "MIT";
    why = "Permissive license.";
  }

  recBox.textContent = rec;
  recWhy.textContent = why;
}

function get(name) {
  const el = document.querySelector(`input[name="${name}"]:checked`);
  return el ? el.value : null;
}

/* ========== LICENSE GENERATION ========== */
function generateLicense() {
  // gather fields
  const author = document.getElementById('authorName').value.trim();
  const year = document.getElementById('licenseYear').value.trim();
  const base = document.querySelector('input[name="base"]:checked')?.value;
  const strict = Array.from(document.querySelectorAll('input[name="genStrict"]:checked')).map(el => el.value);

  if (!base) {
    alert("Pick a base license.");
    return;
  }

  // base text library
  const texts = {
    MIT: `
MIT License

Copyright (c) ${year} ${author}

Permission is hereby granted, free of charge, to any person obtaining a copy...`,
    Apache: `
Apache License 2.0

Copyright ${year} ${author}

Licensed under the Apache License, Version 2.0...`,
    GPLv3: `
GNU GENERAL PUBLIC LICENSE Version 3
Copyright (C) ${year} ${author}
Everyone is permitted to copy...`,
    AGPLv3: `
GNU AFFERO GENERAL PUBLIC LICENSE Version 3
Copyright (C) ${year} ${author}

Everyone is permitted to copy...`,
    LGPLv3: `
GNU LESSER GENERAL PUBLIC LICENSE Version 3
Copyright (C) ${year} ${author}`,
    MPL: `
Mozilla Public License 2.0 (MPL)
Copyright ${year} ${author}`
  };

  let license = texts[base];

  /* strict clauses block */
  if (strict.length) {
    license += `

------------------------------
ADDITIONAL STRICT CLAUSES
------------------------------`;

    if (strict.includes("anti-ai"))
      license += `

Anti-AI Use: This work may not be used to train, fine-tune, or operate machine learning, LLM, or AI systems.`;

    if (strict.includes("no-gov"))
      license += `

No Government Use: Governmental bodies may not use this work unless granted explicit written permission.`;

    if (strict.includes("no-bigtech"))
      license += `

No Big-Tech Use: Corporations exceeding 1,000 employees or $100M/year revenue require written permission.`;

    if (strict.includes("moral"))
      license += `

Moral Use Only: This work may not be used for harm, surveillance, exploitation, or rights violations.`;

    if (strict.includes("source-visible"))
      license += `

Source Visible: All deployments of this work must provide live source-viewing links.`;

    if (strict.includes("personal-only"))
      license += `

Personal Use Only: This work may only be used by individuals for personal non-commercial projects.`;

    if (strict.includes("attrib-banner"))
      license += `

Attribution Banner: Visible credit to the author must appear in UI elements for all derived works.`;
  }

  // write result
  document.getElementById('resultBox').value = license;
  // generate badges
  document.getElementById('badgeBox').value = `[![License: ${base}](https://img.shields.io/badge/license-${base}-blue.svg)](LICENSE)`;

  showPage(5);
}

/* ========== EXPORT FUNCTIONS ========== */
function copyToClipboard() {
  navigator.clipboard.writeText(document.getElementById('resultBox').value);
  alert("Copied.");
}

function downloadLicense() {
  const text = document.getElementById('resultBox').value;
  const blob = new Blob([text], {type:"text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = "LICENSE";
  a.click();
}

function downloadPDF() {
  alert("PDF export placeholder — can wire html2pdf.js here.");
}

/* ========== DARK MODE ========== */
document.getElementById('darkToggle').onclick = () => {
  document.body.classList.toggle('dark');
};
</script>

</body>
</html>
