<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Full License Wizard</title>

<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    display: flex;
    height: 100vh;
    overflow: hidden;
    background: #f8f8f8;
  }

  /* SIDEBAR */
  .sidebar {
    width: 250px;
    background: #1e1e1e;
    color: #e7e7e7;
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
  }
  .side-title {
    font-size: 22px;
    font-weight: 600;
    margin-bottom: 25px;
  }
  .side-link {
    display: block;
    padding: 10px 8px;
    cursor: pointer;
    color: #ccc;
    border-radius: 4px;
    margin-bottom: 8px;
    text-decoration: none;
  }
  .side-link:hover {
    background: #333;
    color: #fff;
  }
  .side-link.active {
    background: #444;
    color: #fff;
  }

  /* CONTENT AREA */
  .content {
    flex: 1;
    overflow-y: auto;
    padding: 30px 40px;
    box-sizing: border-box;
  }
  h1 { margin-bottom: 10px; }
  h2 { margin-top: 25px; }

  fieldset {
    border: 1px solid #aaa;
    padding: 15px;
    margin-top: 20px;
    border-radius: 6px;
    background: #fff;
  }
  legend {
    padding: 0 8px;
    font-weight: 600;
  }

  label { cursor: pointer; }

  textarea {
    width: 100%;
    height: 320px;
    font-family: monospace;
    margin-top: 15px;
    box-sizing: border-box;
  }

  button {
    padding: 10px 15px;
    margin-top: 15px;
    cursor: pointer;
    font-size: 15px;
    border-radius: 4px;
    border: 1px solid #444;
    background: #eee;
  }
  button:hover {
    background: #ddd;
  }

  /* STEP CONTAINERS */
  .page {
    display: none;
  }
  .page.visible {
    display: block;
  }

  /* NEXT/BACK */
  .nav-buttons {
    margin-top: 30px;
  }
  .nav-buttons button {
    margin-right: 10px;
  }

  /* Result box */
  .result-box {
    border: 2px solid #555;
    padding: 20px;
    margin-top: 25px;
    border-radius: 8px;
    background: #fafafa;
  }
</style>
</head>

<body>

<!-- SIDEBAR -->
<div class="sidebar">
  <div class="side-title">License Wizard</div>

  <a class="side-link active" data-target="page1">1. Decision Tree</a>
  <a class="side-link" data-target="page2">2. Tree Explanations</a>
  <a class="side-link" data-target="page3">3. License Generator</a>
  <a class="side-link" data-target="page4">4. Explain Like I'm 5</a>
  <a class="side-link" data-target="page5">5. Export LICENSE</a>
  <a class="side-link" data-target="page6">6. Compare Licenses</a>
  <a class="side-link" data-target="page7">7. Badge Maker</a>
</div>

<!-- MAIN CONTENT -->
<div class="content">

<!-- PAGE 1: DECISION TREE -->
<div id="page1" class="page visible">
  <h1>Step 1: Interactive Decision Tree</h1>
  <p>Select options to determine which license fits your goals.</p>

  <!-- Commercial -->
  <fieldset>
    <legend>1. Can people make money from your code?</legend>
    <label><input type="radio" name="commercial" value="yes"> Yes</label><br>
    <label><input type="radio" name="commercial" value="yes-unmodified"> Yes, but unmodified</label><br>
    <label><input type="radio" name="commercial" value="yes-no-selling"> Yes, but cannot sell code itself</label><br>
    <label><input type="radio" name="commercial" value="no"> No</label>
  </fieldset>

  <!-- Closed Source -->
  <fieldset>
    <legend>2. Can people make closed-source versions?</legend>
    <label><input type="radio" name="closed" value="yes"> Yes</label><br>
    <label><input type="radio" name="closed" value="no"> No</label>
  </fieldset>

  <!-- Copyleft -->
  <fieldset>
    <legend>3. Do modified versions have to stay free?</legend>
    <label><input type="radio" name="copyleft" value="strong"> Yes, strong copyleft</label><br>
    <label><input type="radio" name="copyleft" value="weak"> Only modified files (weak)</label><br>
    <label><input type="radio" name="copyleft" value="no"> No</label>
  </fieldset>

  <!-- Public editing -->
  <fieldset>
    <legend>4. Can the public edit, fork, share?</legend>
    <label><input type="radio" name="public" value="yes"> Yes</label><br>
    <label><input type="radio" name="public" value="view-only"> View Only</label><br>
    <label><input type="radio" name="public" value="no"> No</label>
  </fieldset>

  <!-- SaaS -->
  <fieldset>
    <legend>5. If used on servers, must they release source?</legend>
    <label><input type="radio" name="saas" value="yes"> Yes (AGPL)</label><br>
    <label><input type="radio" name="saas" value="no"> No</label>
  </fieldset>

  <!-- Strict Clauses -->
  <fieldset>
    <legend>Strict Clauses</legend>
    <label><input type="checkbox" id="antiAI"> Anti-AI</label><br>
    <label><input type="checkbox" id="noGov"> No Government</label><br>
    <label><input type="checkbox" id="noBigTech"> No Big Tech</label><br>
    <label><input type="checkbox" id="noSaaS"> No SaaS Resale</label><br>
    <label><input type="checkbox" id="moral"> Moral Use Only</label><br>
    <label><input type="checkbox" id="sourceVisible"> Source Visible Only</label><br>
    <label><input type="checkbox" id="personalOnly"> Personal Use Only</label><br>
    <label><input type="checkbox" id="noDerivatives"> No Derivatives</label><br>
    <label><input type="checkbox" id="attribBanner"> Attribution Banner</label><br>
  </fieldset>

  <!-- Results -->
  <div class="result-box">
    <h2>Recommended License</h2>
    <div id="license-result">Waiting for input...</div>

    <h2>Why this license?</h2>
    <div id="license-explanation"></div>

    <h2>Strict Clauses Selected</h2>
    <div id="strict-list">None</div>
  </div>

  <div class="nav-buttons">
    <button onclick="gotoPage('page2')">Next →</button>
  </div>
</div>

<!-- PAGE 2: EXPLANATIONS -->
<div id="page2" class="page">
  <h1>Step 2: Question Explanations</h1>
  <p>Here are plain-language explanations for the decision-tree options.</p>

  <h2>1. Commercial Use</h2>
  <p>Controls whether your code can be used in business or money-making activities.</p>

  <h2>2. Closed-Source Versions</h2>
  <p>If allowed, companies can hide their changes.</p>

  <h2>3. Derivative Freedom</h2>
  <p>Strong copyleft = “Always stay free.” Weak copyleft = “Keep my files free.”</p>

  <h2>4. Public Editing</h2>
  <p>Controls whether people can fork, remix, and contribute.</p>

  <h2>5. SaaS Disclosure</h2>
  <p>AGPL requires web-hosted versions to release source code.</p>

  <h2>Strict Clauses (Extra Rules)</h2>
  <ul>
    <li>Anti-AI: No dataset, training, fine-tuning.</li>
    <li>No Government Use: Blocks law enforcement, military, state agencies.</li>
    <li>No Big Tech: Blocks Google, Meta, Apple, Microsoft, Amazon, OpenAI, etc.</li>
    <li>No SaaS Resale: Cannot wrap into a paid service.</li>
    <li>Moral Use: No harmful, abusive, discriminatory use.</li>
    <li>Source Visible: People can look but not run or reuse.</li>
    <li>Personal Use: Only individuals may use.</li>
    <li>No Derivatives: No modified versions.</li>
    <li>Attribution Banner: Your credit must remain visible.</li>
  </ul>

  <div class="nav-buttons">
    <button onclick="gotoPage('page1')">← Back</button>
    <button onclick="gotoPage('page3')">Next →</button>
  </div>
</div>

<!-- PAGE 3: LICENSE GENERATOR -->
<div id="page3" class="page">
  <h1>Step 3: License Generator</h1>
  <p>This will fetch the full license text from official sources and insert your details + strict clauses.</p>

  <fieldset>
    <legend>Your Info</legend>
    <label>Your Name<br><input id="author" placeholder="Olivia Griffin"></label><br><br>
    <label>Year<br><input id="year" placeholder="2025"></label><br>
  </fieldset>

  <button onclick="generateFullLicense()">Generate Full License Text</button>
  <button onclick="copyLicenseText()">Copy to Clipboard</button>

  <textarea id="full-license-output" placeholder="Full license text will appear here..."></textarea>

  <div class="nav-buttons">
    <button onclick="gotoPage('page2')">← Back</button>
    <button onclick="gotoPage('page4')">Next →</button>
  </div>
</div>

<!-- PAGE 4: ELI5 -->
<div id="page4" class="page">
  <h1>Step 4: Explain Like I'm 5</h1>
  <p>Explains your license in simple kid-level language.</p>

  <button onclick="explainLikeFive()">Explain My License</button>

  <textarea id="eli5-output"></textarea>

  <div class="nav-buttons">
    <button onclick="gotoPage('page3')">← Back</button>
    <button onclick="gotoPage('page5')">Next →</button>
  </div>
</div>

<!-- PAGE 5: EXPORT LICENSE -->
<div id="page5" class="page">
  <h1>Step 5: Export LICENSE File</h1>

  <button onclick="exportLICENSE()">Download LICENSE File</button>
  <p>The downloaded file will contain the license from the generator step.</p>

  <div class="nav-buttons">
    <button onclick="gotoPage('page4')">← Back</button>
    <button onclick="gotoPage('page6')">Next →</button>
  </div>
</div>

<!-- PAGE 6: COMPARISON -->
<div id="page6" class="page">
  <h1>Step 6: License Comparison</h1>

  <table border="1" cellpadding="6">
    <tr><th>License</th><th>Commercial</th><th>Closed Source</th><th>Stay Free</th><th>SaaS Disclosure</th><th>Patent</th><th>Notes</th></tr>
    <tr><td>MIT</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>No</td><td>Most permissive</td></tr>
    <tr><td>Apache 2.0</td><td>Yes</td><td>Yes</td><td>No</td><td>No</td><td>Yes</td><td>Patent protection</td></tr>
    <tr><td>GPLv3</td><td>Yes</td><td>No</td><td>Yes</td><td>No</td><td>No</td><td>Strong copyleft</td></tr>
    <tr><td>AGPLv3</td><td>Yes</td><td>No</td><td>Yes</td><td>Yes</td><td>No</td><td>Strongest copyleft</td></tr>
    <tr><td>MPL 2.0</td><td>Yes</td><td>Yes</td><td>Files only</td><td>No</td><td>No</td><td>Weak copyleft</td></tr>
  </table>

  <div class="nav-buttons">
    <button onclick="gotoPage('page5')">← Back</button>
    <button onclick="gotoPage('page7')">Next →</button>
  </div>
</div>

<!-- PAGE 7: BADGE MAKER -->
<div id="page7" class="page">
  <h1>Step 7: Badge Maker</h1>

  <label>Label:<br><input id="badge-label" placeholder="license"></label><br>
  <label>Value:<br><input id="badge-value" placeholder="MIT"></label><br>
  <label>Color:<br><input id="badge-color" placeholder="blue"></label><br><br>

  <button onclick="makeBadge()">Generate Badge</button>

  <h3>Markdown</h3>
  <textarea id="badge-markdown"></textarea>

  <h3>Image URL</h3>
  <textarea id="badge-url"></textarea>

  <div class="nav-buttons">
    <button onclick="gotoPage('page6')">← Back</button>
  </div>
</div>

</div>

<script>
function gotoPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('visible'));
  document.querySelectorAll('.side-link').forEach(s=>s.classList.remove('active'));
  document.querySelector(`.side-link[data-target="${id}"]`)?.classList.add('active');
  document.getElementById(id).classList.add('visible');
}

/* DECISION TREE LOGIC */
let chosenLicense="MIT";

function getStrict(){
  const arr=[];
  ['antiAI','noGov','noBigTech','noSaaS','moral','sourceVisible','personalOnly','noDerivatives','attribBanner']
  .forEach(idName=>{
    if(document.getElementById(idName).checked) arr.push(idName);
  });
  return arr;
}

document.body.addEventListener("change", update);

function update(){
  const commercial=get("commercial");
  const closed=get("closed");
  const copyleft=get("copyleft");
  const pub=get("public");
  const saas=get("saas");
  const strict=getStrict();

  function setResult(name, why){
    chosenLicense=name;
    document.getElementById("license-result").innerText=name;
    document.getElementById("license-explanation").innerText=why;
    document.getElementById("strict-list").innerText=strict.length?strict.join(", "):"None";
  }

  if(pub==="no"||pub==="view-only"){
    setResult("Strict Proprietary License","Editing/forking blocked.");
    return;
  }

  if(commercial==="no"||closed==="no"||copyleft==="strong"){
    if(saas==="yes"){
      setResult("AGPLv3","Strong copyleft + SaaS requirement.");
      return;
    }
    setResult("GPLv3","Strong copyleft keeps all modified versions free.");
    return;
  }

  if(copyleft==="weak"){
    setResult("MPL 2.0","Weak copyleft: only modified files must stay open.");
    return;
  }

  if(commercial==="yes"&&closed==="yes"&&copyleft==="no"){
    setResult("MIT","Permissive license.");
    return;
  }

  setResult("MIT","Default permissive license.");
}

function get(name){
  const el=document.querySelector(`input[name="${name}"]:checked`);
  return el?el.value:null;
}

/* AUTO-FETCH LICENSE TEXT */
async function fetchLicenseText(type){
  const urls={
    gpl:"https://www.gnu.org/licenses/gpl-3.0.txt",
    agpl:"https://www.gnu.org/licenses/agpl-3.0.txt",
    mit:"https://raw.githubusercontent.com/licenses/license-templates/master/templates/mit.txt",
    apache:"https://www.apache.org/licenses/LICENSE-2.0.txt",
    bsd:"https://raw.githubusercontent.com/licenses/license-templates/master/templates/bsd3.txt",
    mpl:"https://www.mozilla.org/media/MPL/2.0/index.txt"
  };
  try{
    const r=await fetch(urls[type]);
    return await r.text();
  }catch{
    return `Error fetching ${type}`;
  }
}

async function generateFullLicense(){
  const name=document.getElementById("author").value||"Author";
  const year=document.getElementById("year").value||new Date().getFullYear();
  const strictList=getStrict();

  let baseText="";

  if(chosenLicense==="MIT"){
    baseText=await fetchLicenseText("mit");
  }else if(chosenLicense==="GPLv3"){
    baseText=await fetchLicenseText("gpl");
  }else if(chosenLicense==="AGPLv3"){
    baseText=await fetchLicenseText("agpl");
  }else if(chosenLicense==="MPL 2.0"){
    baseText=await fetchLicenseText("mpl");
  }else if(chosenLicense==="Strict Proprietary License"){
baseText=
`Copyright © ${year} ${name}
All Rights Reserved.

You may view the source, but may not run, modify, reuse, or distribute it.`;
  }

  let final=
`License: ${chosenLicense}
Copyright © ${year} ${name}

${baseText}

Additional Clauses:
${strictList.length?strictList.join("\n"):"None"}
`;
  document.getElementById("full-license-output").value=final;
}

/* CLIPBOARD */
function copyLicenseText(){
  navigator.clipboard.writeText(document.getElementById("full-license-output").value);
  alert("Copied!");
}

/* ELI5 */
function explainLikeFive(){
  let msg="";

  if(chosenLicense==="MIT") msg="MIT means anyone can use your code however they want.";
  if(chosenLicense==="GPLv3") msg="GPL means if they change your code, they must share it.";
  if(chosenLicense==="AGPLv3") msg="AGPL means GPL rules + must share if used on a website.";
  if(chosenLicense==="MPL 2.0") msg="MPL means only changed files must stay open.";
  if(chosenLicense==="Strict Proprietary License") msg="Strict means they can see code but not use it.";

  msg+=`\n\nExtra Rules:\n${getStrict().join(", ")||"None"}`;

  document.getElementById("eli5-output").value=msg;
}

/* EXPORT */
function exportLICENSE(){
  const text=document.getElementById("full-license-output").value;
  const blob=new Blob([text],{type:"text/plain"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="LICENSE";
  a.click();
}

/* BADGE MAKER */
function makeBadge(){
  const label=document.getElementById("badge-label").value||"license";
  const value=document.getElementById("badge-value").value||chosenLicense;
  const color=document.getElementById("badge-color").value||"blue";

  const url=
`https://img.shields.io/badge/${encodeURIComponent(label)}-${encodeURIComponent(value)}-${color}`;

  document.getElementById("badge-url").value=url;
  document.getElementById("badge-markdown").value=`![${label}](${url})`;
}
</script>

</body>
</html>
